{% extends 'common/base.html' %}

{% block content %}
    <div class="property-details-wrapper">
        <div class="property-details-card">
            <!-- Property Image -->
            <img src="{{ property.image }}" alt="Property Image">

            <!-- Property Title -->
            <div class="property-header d-flex justify-content-between align-items-center">
                <h2>{{ property.title }}</h2>
                {% if request.user.pk == property.user.pk %}
                    <div class="property-actions">
                        <a href="{% url 'property-edit' property.id %}" class="property-btn-edit">Edit</a>
                        <a href="{% url 'property-delete' property.id %}" class="property-btn-delete">Delete</a>
                    </div>
                {% endif %}
            </div>

            <!-- Property Details -->
            <div class="details">
                <span><strong>Price:</strong> ${{ property.price }}</span>
                <span><strong>Area:</strong> {{ property.area }} sq. m.</span>
                <span><strong>Price per sq. m.:</strong> ${{ property.calculate_price_per_sqm }}</span>
                <span><strong>City:</strong> {{ property.city }}</span>
                <span><strong>Address:</strong> {{ property.address }}</span>
                <span><strong>Favorited by:</strong> {{ property.favourites.count }} people</span>
            </div>
            <hr>
            <!-- Reviews Section -->
            <div class="reviews-section">
                <h3>Reviews</h3>
                
                {% if property.reviews.exists %}
                    {% for review in property.reviews.all %}
                        <div class="review-card">
                            <a href="{% url 'profile-details' review.user.pk %}">
                            <p class="rating">Rating: {{ review.rating }} / 5</p>
                            <p>{{ review.text }}</p>
                            <p class="date">Published on: {{ review.date_time_of_publication }}</p>
                            </a>
                        </div>
                    {% endfor %}
                {% else %}
                    <div class="no-reviews">No reviews yet.</div>
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %}